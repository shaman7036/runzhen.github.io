---
layout: post
comments: no
title: "一致性 hash"
category: "Distributed"
tags: [hash]
---

在理解一致性 hash 之前，先来看看这个问题是怎么产生的。
> 例如我们有一个数据库，里面存了成千上万张图片（你懂的），用户访问图片会呈现一定的规律性，比如某段时间内一张照片火了，那么短时间内会有大量的请求访问这张图片，会对数据库造成压力，这时候我们就想到要加一层缓存，这也是系统架构的终极法宝。

所以，这种场景下典型的系统架构如下图所示：

![arch](/image/2018/hash1.png)

客户端要访问文件名为 A 的图片，代理服务器根据文件名去缓存服务器中查询，如果cache中没有，那么最终去数据库取，同时也把取到的图片文件缓存在某个缓存服务器中。

